# Megano Django Website

## Оглавление:
- **[Описание проекта](#описание-проекта)**
- **[Команда](#команда)**
- **[Требования](#требования)**
- **[Запуск проекта](#запуск-проекта)**

## Описание проекта

Вебсайт для интернет-магазина ___Megano___. Занимается продажей электроники, бытовой техники и электротоваров.

## Технологии:
- __`Django`__
- __`Django Rest Framework`__

## Схема таблиц базы данных:

Все модели таблиц БД и связи между ними представлены в файле core/db_models_schema.svg.  
Если ваша среда разработки не открывает данный файл, вы можете перейти по ссылке <a href='https://drive.google.com/file/d/1xmYcBeSAk0eWfjy8IXsFEZmdAmB0L6qE/view?usp=drive_link'>db_models_shcema</a>
и открыть файл в онлайн-редакторе draw.io.  
В файле, также, есть текстовое описание логики работы таблиц и предназначение некоторых полей.

## Команда:
- __`Сергей`__ тимлид
- __`Иван`__
- __`Бекхан`__
- __`Сергей`__
- __`Владимир`__
- __`Георгий`__

## Требования:
 - Перед запуском django-проекта необходимо установить интерпретатор _`Python 3.12`_
 - Для работы с базой данных PostgreSQL вам понадобится установить [_`pgAdmin4`_](https://www.pgadmin.org/download/) либо [_`DBeaver`_](https://dbeaver.io/download/)

## Запуск проекта:
1. Настроить подключение по __`SSH`__

- ### **Установка SSH-клиента:**
  - Linux
    - Для работы с SSH необходимо установить специальную программу на локальной машине (Linux), реализующую SSH-подключение (SSH-клиент)
    - В большинстве случаев на Linux (например, Ubuntu, Linux Mint) инструменты для работы с SSH уже установлены. Если их нет, установите пакет следующим образом:
    ```bash
    apt update && apt upgrade -y && apt install -y openssh-client
    ```
  - MacOS
    - На macOS клиент SSH доступен по умолчанию. Также вы можете воспользоваться сторонними утилитами с графическим интерфейсом, например [_`Termuis`_](https://termius.com/)
  
  - Windows
    - Для работы с SSH на Windows можно активировать встроенный SSH-клиент или установить сторонний инструмент, через который проще управлять подключениями. Также на Windows есть и более старые, но тоже популярные программы для работы с SSH:[__`PuTTY`__](https://putty.org.ru/download) 

- ### **Выпуск ключей в терминале**
- Перейдите в терминал и выполните команду:
  - ```bash
    ssh-keygen -b 2048 -t rsa
    ```
  - В терминале вы увидите вопрос о том, куда сохранить новый ключ. Не меняя ничего, нажмите Enter (или Return на Mac), чтобы продолжить:
  - ```bash
    Generating public/private rsa key pair.
    Enter file in which to save the key (/root/.ssh/id_rsa):
    ```
  - Если директории под SSH-ключи не было, вас уведомят, что она создана:
  - ```bash
    Created directory '/root/.ssh'.
    ```
  - Если в настоящее время вы используете доступ к серверу с помощью пароля, вы можете скопировать ваш публичный ключ на сервер, воспользовавшись данной командой:
  - ```bash
    ssh-copy-id <remote_host>
    ```
  - Теперь вы можете подлючиться к серверу по SSH командой:
  - ```bash
    ssh <remote_host>
    ```
<br>

2. Клонируем репозиторий `https://gitlab.skillbox.ru/pythondjango_team43/djangowebsite` и переходим в папку проекта:
```bash
cd website
```

3. Создать и активировать виртуальное окружение:
- Windows
```bash
python -m venv venv
venv\Scripts\activate
```
- macOS / Linux
```bash
python3 -m venv venv
source venv/bin/activate
```

4. Установка зависимостей:
```bash
pip install -r requirements.txt
```

5. Создайте файл с переменными окружения:
```bash
touch .env
```

6. Заполните переменные окружения в новосозданном файле `.env`:
SMTP-сервер почтового клиента `EMAIL_HOST = 'smtp.yandex.com'` - __`Yandex`__. Если вы хотите использовать другой почтовый клиент, например `gmail`, исправьте на `EMAIL_HOST = 'smtp.gmail.com'`

```bash
EMAIL_USER='адрес электронной почты'
EMAIL_PASSWORD='пароль от почты'
```
- ### **Порядок накатывания миграций перед первым запуском проекта**

Переопределение стандартной модели пользователя (User) в Django,
вызывает ряд ошибок при накатывании миграций, если не следовать следующему порядку:
1. Cоздайте миграции
```bash
python manage.py makemigrations
```
2. Накатите миграции стандартного приложения auth
```bash
python manage.py migrate auth
```
3. Накатите все оставшиеся миграции
```bash
python manage.py migrate
```
Теперь вы можете создать суперпользователя (python manage.py createsuperuser) и запустить проект.